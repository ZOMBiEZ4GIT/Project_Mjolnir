@import "tailwindcss";
@config "../tailwind.config.ts";

@layer base {
  :root {
    --background: 240 6% 2%;
    --foreground: 0 0% 95%;
    --card: 240 6% 10%;
    --card-foreground: 0 0% 95%;
    --popover: 240 6% 10%;
    --popover-foreground: 0 0% 95%;
    --primary: 263 84% 70%;
    --primary-foreground: 0 0% 100%;
    --secondary: 240 4% 16%;
    --secondary-foreground: 0 0% 95%;
    --muted: 240 4% 16%;
    --muted-foreground: 240 5% 65%;
    --accent: 263 84% 70%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 63%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 4% 16%;
    --input: 240 4% 16%;
    --ring: 263 84% 70%;
    --chart-1: 263 84% 70%;
    --chart-2: 142 71% 45%;
    --chart-3: 0 84% 63%;
    --chart-4: 43 74% 66%;
    --chart-5: 220 70% 50%;
    --radius: 0.5rem;
    --positive: 142 71% 45%;
    --positive-foreground: 0 0% 100%;
    --negative: 0 84% 63%;
    --negative-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    --accent-glow: rgba(164, 114, 243, 0.35);
    --positive-glow: rgba(34, 197, 94, 0.35);
    --negative-glow: rgba(240, 81, 81, 0.35);

    /* Glassmorphism tokens */
    --glass-bg: rgba(24, 24, 30, 0.6);
    --glass-border: rgba(255, 255, 255, 0.06);
    --glass-border-hover: rgba(255, 255, 255, 0.10);
  }

}

/* Animated conic-gradient border angle */
@property --angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }
}

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Glassmorphic card surface */
  .glass-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px -1px rgba(0, 0, 0, 0.3);
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }

  .glass-card:hover {
    border-color: var(--glass-border-hover);
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  }

  /* Shimmer skeleton loader */
  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 25%,
      hsl(var(--muted) / 0.5) 50%,
      hsl(var(--muted)) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite linear;
    border-radius: 0.25rem;
  }
}

/*
 * Global focus-visible utility.
 * All interactive elements should use: focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background
 * --ring token = --accent (purple) = 263 84% 70%
 */

/*
 * WCAG AA Colour Contrast Verification (US-010)
 * All ratios verified >= 4.5:1 for normal text (WCAG AA).
 *
 * Text on --background (240 6% 2%):
 *   foreground (0 0% 95%)        → 18.26:1 ✓
 *   muted-foreground (240 5% 65%) → 7.99:1 ✓
 *   accent (263 84% 70%)          → 6.10:1 ✓
 *   positive (142 71% 45%)        → 8.88:1 ✓
 *   destructive (0 84% 63%)       → 5.84:1 ✓
 *   warning (38 92% 50%)          → 9.54:1 ✓
 *
 * Text on --card (240 6% 10%):
 *   foreground (0 0% 95%)        → 15.86:1 ✓
 *   muted-foreground (240 5% 65%) → 6.94:1 ✓
 *   accent (263 84% 70%)          → 5.30:1 ✓
 *   positive (142 71% 45%)        → 7.71:1 ✓
 *   destructive (0 84% 63%)       → 5.07:1 ✓
 *   warning (38 92% 50%)          → 8.29:1 ✓
 *
 * Badge text on tinted bg over card:
 *   text-accent on bg-accent/10     → 4.67:1 ✓
 *   text-positive on bg-positive/20 → 5.41:1 ✓
 *   text-destructive on bg-destructive/10 → 4.56:1 ✓
 *   text-warning on bg-warning/10   → 7.01:1 ✓
 *
 * Token changes from original:
 *   --accent/primary/ring: 263 84% 66% → 70% (fixes accent on card: 4.41→5.30)
 *   --destructive/negative: 0 84% 60% → 63% (fixes destructive badge: 3.76→4.56)
 *   Badge bg opacity: accent/destructive /20 → /10 (improves badge contrast)
 */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
