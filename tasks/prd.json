{
  "project": "Mjolnir",
  "branchName": "feature/w13-data-export",
  "description": "Data export functionality allowing Roland to backup holdings, transactions, and snapshots as CSV or JSON files.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create holdings export utility",
      "description": "As a developer, I need a utility to export holdings data.",
      "acceptanceCriteria": [
        "Create lib/export/holdings-exporter.ts",
        "Function exportHoldingsCSV(holdings) returns CSV string",
        "Function exportHoldingsJSON(holdings) returns JSON string",
        "CSV includes: name, symbol, type, currency, exchange, is_dormant, created_at",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Created lib/export/holdings-exporter.ts with exportHoldingsCSV and exportHoldingsJSON functions"
    },
    {
      "id": "US-002",
      "title": "Create transactions export utility",
      "description": "As a developer, I need a utility to export transactions data.",
      "acceptanceCriteria": [
        "Create lib/export/transactions-exporter.ts",
        "Function exportTransactionsCSV(transactions) returns CSV string",
        "Function exportTransactionsJSON(transactions) returns JSON string",
        "CSV includes: date, symbol, action, quantity, unit_price, fees, currency, notes",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Created lib/export/transactions-exporter.ts with exportTransactionsCSV and exportTransactionsJSON functions. Uses TransactionWithSymbol type to include holding symbol in exports."
    },
    {
      "id": "US-003",
      "title": "Create snapshots export utility",
      "description": "As a developer, I need a utility to export snapshots data.",
      "acceptanceCriteria": [
        "Create lib/export/snapshots-exporter.ts",
        "Function exportSnapshotsCSV(snapshots) returns CSV string",
        "Function exportSnapshotsJSON(snapshots) returns JSON string",
        "CSV includes: date, holding_name, balance, currency",
        "Includes contributions if available (employer_contrib, employee_contrib)",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Created lib/export/snapshots-exporter.ts with exportSnapshotsCSV and exportSnapshotsJSON functions. Uses SnapshotWithDetails interface extending Snapshot with holdingName and optional contribution fields."
    },
    {
      "id": "US-004",
      "title": "Create full backup export utility",
      "description": "As a developer, I need a utility to export all data as one backup.",
      "acceptanceCriteria": [
        "Create lib/export/backup-exporter.ts",
        "Function exportFullBackupJSON returns combined JSON with holdings, transactions, snapshots",
        "Includes metadata: export_date, version, user_id",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Create export API endpoint for holdings",
      "description": "As a developer, I need an API to download holdings export.",
      "acceptanceCriteria": [
        "Create app/api/export/holdings/route.ts",
        "GET accepts format query param (csv or json)",
        "Returns file with appropriate Content-Type header",
        "Sets Content-Disposition for download",
        "Requires Clerk authentication",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Create export API endpoint for transactions",
      "description": "As a developer, I need an API to download transactions export.",
      "acceptanceCriteria": [
        "Create app/api/export/transactions/route.ts",
        "GET accepts format query param (csv or json)",
        "Returns file with appropriate Content-Type header",
        "Sets Content-Disposition for download",
        "Requires Clerk authentication",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Create export API endpoint for snapshots",
      "description": "As a developer, I need an API to download snapshots export.",
      "acceptanceCriteria": [
        "Create app/api/export/snapshots/route.ts",
        "GET accepts format query param (csv or json)",
        "Returns file with appropriate Content-Type header",
        "Sets Content-Disposition for download",
        "Requires Clerk authentication",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Create export API endpoint for full backup",
      "description": "As a developer, I need an API to download full backup.",
      "acceptanceCriteria": [
        "Create app/api/export/backup/route.ts",
        "GET returns JSON backup file",
        "Includes all holdings, transactions, snapshots, contributions",
        "Sets Content-Disposition for download with timestamp",
        "Requires Clerk authentication",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Create export page",
      "description": "As Roland, I want a dedicated page to export my data.",
      "acceptanceCriteria": [
        "Create app/(dashboard)/export/page.tsx",
        "Add Export link to dashboard navigation",
        "Page title: Export Data",
        "Shows sections for each export type",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Add holdings export section to export page",
      "description": "As Roland, I want to export my holdings.",
      "acceptanceCriteria": [
        "Section shows Holdings Export with description",
        "Buttons for Download CSV and Download JSON",
        "Shows count of holdings to export",
        "Clicking button triggers file download",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Add transactions export section to export page",
      "description": "As Roland, I want to export my transactions.",
      "acceptanceCriteria": [
        "Section shows Transactions Export with description",
        "Buttons for Download CSV and Download JSON",
        "Shows count of transactions to export",
        "Clicking button triggers file download",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Add snapshots export section to export page",
      "description": "As Roland, I want to export my snapshots.",
      "acceptanceCriteria": [
        "Section shows Snapshots Export with description",
        "Buttons for Download CSV and Download JSON",
        "Shows count of snapshots to export",
        "Clicking button triggers file download",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Add full backup section to export page",
      "description": "As Roland, I want to create a full backup of all my data.",
      "acceptanceCriteria": [
        "Section shows Full Backup with description",
        "Single Download Backup button",
        "Shows total counts (holdings, transactions, snapshots)",
        "Clicking button triggers JSON backup download",
        "Filename includes date: mjolnir-backup-YYYY-MM-DD.json",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Add export loading states",
      "description": "As Roland, I want feedback while exports are generating.",
      "acceptanceCriteria": [
        "Show loading spinner on export buttons while downloading",
        "Disable buttons during download",
        "Show success toast when download completes",
        "Show error toast if download fails",
        "Typecheck passes",
        "Lint passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    }
  ]
}
